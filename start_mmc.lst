Renesas / SuperH SH GAS Big Endian C:\Users\Bimbo\AppData\Local\Temp\cc79u0Sk.s 			page 1


   1              	# 1 "start_mmc.s"
   1              	! For Subaru ECUs.
   0              	
   2              	! Apparently they're always loaded at a fixed address in RAM : no need to move the payload
   3              	! TODO : remove auto-copy; make sure entry point is correct vs .ld file
   4              	
   5              	! (c) copyright fenugrec 2022
   6              	! GPLv3
   7              	! 
   8              	! This program is free software: you can redistribute it and/or modify
   9              	! it under the terms of the GNU General Public License as published by
  10              	! the Free Software Foundation, either version 3 of the License, or
  11              	! (at your option) any later version.
  12              	! 
  13              	! This program is distributed in the hope that it will be useful,
  14              	! but WITHOUT ANY WARRANTY; without even the implied warranty of
  15              	! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16              	! GNU General Public License for more details.
  17              	! 
  18              	! You should have received a copy of the GNU General Public License
  19              	! along with this program.  If not, see <http://www.gnu.org/licenses/>.
  20              	!
  21              	
  22              	
  23              	
  24              		.list
  25              		.section .rja
  26              		.global RAMjump_entry
  27              	
  28              		.extern _main	!user code
  29              		.extern _ebss
  30              		.extern _bss
  31              		.extern _stackinit
  32              	
  33              	RAMjump_entry:
  34              		.BALIGN 2
  35              	! these end up at ffff8000, in case ramjump lands here instead of ffff8004
  36 0000 0009     		nop
  37 0002 0009     		nop
  38              	
  39              	zero_bss:
  40 0004 D108     		mov.l ebss, r1
  41 0006 D007     		mov.l	bss, r0
  42 0008 E200     		mov #0, r2
  43              	zero_top:
  44 000a 3100     		cmp/eq	r0, r1
  45 000c 8901     		bt	zero_end
  46 000e AFFC     		bra	zero_top
  47 0010 2124     		mov.b	r2,@-r1
  48              	zero_end:
  49              	
  50 0012 D103     		mov.l	main,r1
  51 0014 DF01     		mov.l	stack,r15
  52 0016 410B     		jsr     @r1
  53 0018 0009     		nop
  54              	
  55 001a 0000     		.BALIGN 4
Renesas / SuperH SH GAS Big Endian C:\Users\Bimbo\AppData\Local\Temp\cc79u0Sk.s 			page 2


  56              	stack:
  57 001c 00000000 			.long	_stackinit
  58              	main:
  59 0020 00000000 			.long	_main
  60              	bss:
  61 0024 00000000 			.long	_sbss
  62              	ebss:
  63 0028 00000000 			.long	_ebss
Renesas / SuperH SH GAS Big Endian C:\Users\Bimbo\AppData\Local\Temp\cc79u0Sk.s 			page 3


DEFINED SYMBOLS
         start_mmc.s:33     .rja:0000000000000000 RAMjump_entry
         start_mmc.s:39     .rja:0000000000000004 zero_bss
         start_mmc.s:62     .rja:0000000000000028 ebss
         start_mmc.s:60     .rja:0000000000000024 bss
         start_mmc.s:43     .rja:000000000000000a zero_top
         start_mmc.s:48     .rja:0000000000000012 zero_end
         start_mmc.s:58     .rja:0000000000000020 main
         start_mmc.s:56     .rja:000000000000001c stack

UNDEFINED SYMBOLS
_stackinit
_main
_sbss
_ebss
